- hosts: all
  gather_facts: false
  tasks:
  - name: install common components
    become: true
    command: "{{item}}" 
    with_items:
    - "dnf install chrony -y"
    - "systemctl enable chronyd"
    - "dnf update -y"
   #- "reboot"
    - "dnf install python3 -y" 
   # - se instala git y ansible en la máquina que se va a usar de controlador de ansible, en este caso ya viene instalada en el CLI de azure 
   # - dnf install git ansible -y
   # uso become para acceder como superusuario 
  
  - name: actualizamos máquinas al último nivel
    become: true
    command: dnf update -y

  - name: sincronización horaria
    become: true
    command: timedatectl set-timezone Europe/Madrid
  
  - name: enable chronyd
    become: true
    command: systemctl enable chronyd
    
  - name: arrancar chronyd
    become: true
    command: systemctl start chronyd

  - name: timedatectl set-ntp
    become: true
    command: timedatectl set-ntp true
  
  - name: SELinux estuviera activado lo desativamos
    become: true
    command: sed -i s/=enforcing/=disabled/g /etc/selinux/config
  
  - name: instalación de paquetes necesarios
    become: true
    command: dnf install nfs-utils nfs4-acl-tools wget -y
  
   
  
  
  
