- hosts: master
  gather_facts: false
  tasks:
   # Creamos un namespace
   #- name: Create namespace 
   #  become: true
   #  community.kubernetes.k8s: 
   #     namespace: webapp-volumes
     
  - name: Create namespace 
    become: true
    shell: kubectl create namespace webapp-volumes
    ignore_errors: yes
  
  # copiamos nfs-pv-yaml al directorio de master
  - name: Copy nfs-pv.yaml to master
    become: true
    copy:
      src: nfs-pv.yaml 
      dest: ./
  
  # aplicamos nfs-pv
  - name: Apply nfs-pv.yaml
    become: true
    shell: kubectl apply -f nfs-pv.yaml
       
  # copiamos nfs-pvc.yaml al directorio de master
  - name: Copy nfs-pvc.yaml to master
    become: true
    copy:
      src: nfs-pvc.yaml 
      dest: ./
  
  # aplicamos nfs-pvc
  - name: Apply nfs-pvc.yaml
    become: true
    shell: kubectl apply -f nfs-pvc.yaml
    
  # copiamos webapp-volumes.yaml al directorio de master
  - name: Copy webapp-volumes.yaml to master
    become: true
    copy:
      src: webapp-volumes.yaml 
      dest: ./
  
  # aplicamos webapp-volumes
  - name: Apply webapp-volumes.yaml
    become: true
    shell: kubectl apply -f webapp-volumes.yaml
    
  # copiamos first_app.yaml al directorio de master
  - name: Copy first-app.yaml to master
    become: true
    copy:
      src: first-app.yaml
      dest: ./
  
  # aplicamos first_app
  - name: Apply first-app.yaml
    become: true
    shell: kubectl apply -f first-app.yaml
   
    
    
    
       
       
