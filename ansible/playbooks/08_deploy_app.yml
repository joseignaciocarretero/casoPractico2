- hosts: master
  gather_facts: false
  tasks:
   # Creamos un namespace
   #- name: Create namespace 
   #  become: true
   #  community.kubernetes.k8s: 
   #     namespace: webapp-volumes
  - name: Create namespace 
    become: true
    shell: kubectl create namespace webapp-volumes
    ignore_errors: yes
  
  # copiamos nfa-yaml al directorio de master
  - name: Copy nfs-pv.yaml to master
    become: true
    copy:
      src: nfs-pv.yaml 
      dest: ./
  
  # aplicamos nfs-pv
  - name: Apply nfs-pv.yaml
    become: true
    shell: kubectl apply -f nfs-pv.yaml
       
  # copiamos nfs- al directorio de master
  - name: Copy nfs-pvc.yaml to master
    become: true
    copy:
      src: nfs-pvc.yaml 
      dest: ./
  
  # aplicamos nfs-pv
  - name: Apply nfs-pvc.yaml
    become: true
    shell: kubectl apply -f nfs-pvc.yaml
    
       
       
